<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - ONT_3rdyear_Project</title>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="/css/LandingPage.css" rel="stylesheet" />
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body>
    <div class="index-page">
        <div class="page-loader" id="pageLoader"></div>

        <!-- Header -->
        <header id="header" class="header d-flex align-items-center">
            <div class="header-container container-fluid container-xl position-relative d-flex align-items-center justify-content-between">
                
                <!-- Logo -->
                <a class="mt-1" asp-area="" asp-controller="Home" asp-action="Index">
                    <h4><i class="fas fa-building"></i> DevDynamo</h4>
                </a>

                <!-- Navigation Menu -->
                <nav id="navmenu" class="navmenu">
                    <ul>
                        <!-- Nurse Dashboard -->
                        @if (User.Identity.IsAuthenticated && User.IsInRole("Nurse"))
                        {
                            <li>
                                <a class="hospital-nav-link dashboard" asp-area="" asp-controller="Nurse" asp-action="Dashboard">
                                    Nurse Dashboard
                                </a>
                            </li>
                        }

                        <!-- Sister Dashboard -->
                        @if (User.Identity.IsAuthenticated && User.IsInRole("Sister"))
                        {
                            <li class="nav-item">
                                <a class="hospital-nav-link dashboard" asp-area="" asp-controller="NurseSister" asp-action="Dashboard">
                                    Dashboard
                                </a>
                            </li>
                        }

                        <!-- Doctor Dashboard -->
                        @if (User.Identity.IsAuthenticated && User.IsInRole("Doctor"))
                        {
                            <li class="nav-item">
                                <a class="hospital-nav-link dashboard" asp-area="" asp-controller="Doctor" asp-action="Dashboard">
                                    Doctor Dashboard
                                </a>
                            </li>
                        }

                        <!-- Ward Admin Dashboard -->
                        @if (User.Identity.IsAuthenticated && User.IsInRole("WardAdmin"))
                        {
                            <li class="nav-item">
                                <a class="hospital-nav-link dashboard" asp-area="" asp-controller="WardAdmin" asp-action="Index">
                                    Ward Admin Dashboard
                                </a>
                            </li>
                        }

                        <!-- Consumable Manager Dashboard -->
                        @if (User.Identity.IsAuthenticated && User.IsInRole("ConsumableManager"))
                        {
                            <li class="nav-item">
                                <a class="hospital-nav-link dashboard" asp-area="" asp-controller="Consumable" asp-action="Index">
                                    Consumable Dashboard
                                </a>
                            </li>
                        }

                        <!-- Script Dashboard -->
                        @if (User.Identity.IsAuthenticated && User.IsInRole("Script"))
                        {
                            <li class="nav-item">
                                <a class="hospital-nav-link dashboard" asp-area="" asp-controller="Script" asp-action="Dashboard">
                                    Script Dashboard
                                </a>
                            </li>
                        }

                        <!-- Admin Links -->
                        @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
                        {
                            <li class="nav-item">
                                <a class="hospital-nav-link privacy" asp-area="" asp-controller="Admin" asp-action="ListMedication">
                                    Medications
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="hospital-nav-link privacy" asp-area="" asp-controller="Admin" asp-action="Employees">
                                    Employees
                                </a>
                            </li>
                        }

                        <!-- Contact -->
                        <li>
                            <a href="contact.html">Contact</a>
                        </li>

                        <!-- Mobile Navigation Toggle -->
                       <li> <a><i class="mobile-nav-toggle d-xl-none bi bi-list"></a></i></li>
                    </ul>
                </nav>

                <!-- Login Partial -->
                <partial name="_LoginPartial" />
            </div>
        </header>
    </div>

    <!-- Alert Messages -->
    @if (TempData["Message"] != null)
    {
        <div class="alert alert-info alert-dismissible fade show autoCloseAlert" 
             role="alert" 
             style="position: fixed; top: 20px; right: 20px; z-index: 1050; min-width: 250px;">
            @TempData["Message"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show autoCloseAlert" 
             role="alert" 
             style="position: fixed; top: 20px; right: 20px; z-index: 1050; min-width: 250px;">
            @TempData["Error"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    <!-- Main Content Container -->
    <div class="hospital-container">
        <main role="main" class="main-content">
            @RenderBody()
        </main>
    </div>

   

    <!-- JavaScript Libraries -->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>

    <!-- Auto-close Alerts Script -->
    <script>
        setTimeout(function () {
            document.querySelectorAll('.autoCloseAlert').forEach(function (alertEl) {
                var bsAlert = new bootstrap.Alert(alertEl);
                bsAlert.close();
            });
        }, 3000); // closes after 3 seconds
    </script>

    <!-- Footer Hover Effects Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Footer links hover effects
            const footerLinks = document.querySelectorAll('footer a:not([asp-controller])');
            footerLinks.forEach(link => {
                link.addEventListener('mouseover', function () {
                    this.style.color = '#fff';
                    this.style.paddingLeft = '5px';
                });
                link.addEventListener('mouseout', function () {
                    this.style.color = '#bbb';
                    this.style.paddingLeft = '0';
                });
            });

            // Social links hover effects
            const socialLinks = document.querySelectorAll('footer .social-links a');
            socialLinks.forEach(link => {
                link.addEventListener('mouseover', function () {
                    this.style.backgroundColor = '#e63757';
                    this.style.transform = 'translateY(-3px)';
                });
                link.addEventListener('mouseout', function () {
                    this.style.backgroundColor = 'rgba(255, 255, 255, 0.1)';
                    this.style.transform = 'translateY(0)';
                });
            });
        });
    </script>

    <!-- Page Loading & Smooth Scrolling Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const loader = document.getElementById('pageLoader');

            // Show loader on page navigation
            document.querySelectorAll('a[href]').forEach(link => {
                link.addEventListener('click', function(e) {
                    if (!this.href.startsWith('#') && !this.hasAttribute('target')) {
                        loader.classList.add('loading');
                    }
                });
            });

            // Smooth scrolling for internal links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });

        // Header shadow animation on scroll
        window.addEventListener('scroll', function() {
            const scrolled = window.pageYOffset;
            const header = document.querySelector('.hospital-header');

            if (scrolled > 50) {
                header.style.boxShadow = '0 8px 32px rgba(0, 102, 204, 0.2)';
            } else {
                header.style.boxShadow = '0 4px 20px rgba(0, 102, 204, 0.15)';
            }
        });
    </script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>